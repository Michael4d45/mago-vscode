{
  "name": "mago-vscode",
  "displayName": "Mago",
  "description": "Mago integration for VSCode",
  "version": "0.1.5",
  "publisher": "Michael4d45",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/michael4d45/mago-vscode.git"
  },
  "homepage": "https://github.com/michael4d45/mago-vscode#readme",
  "bugs": {
    "url": "https://github.com/michael4d45/mago-vscode/issues"
  },
  "engines": {
    "vscode": "^1.90.0"
  },
  "icon": "icon.png",
  "categories": [
    "Linters",
    "Programming Languages"
  ],
  "activationEvents": [
    "onLanguage:php"
  ],
  "main": "./out/client/src/extension.js",
  "contributes": {
    "configuration": {
      "title": "Mago",
      "properties": {
        "mago.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable Mago extension. Note: Changing this setting requires reloading the IDE to take effect."
        },
        "mago.binPath": {
          "type": "string",
          "default": "mago",
          "description": "Path to mago binary (blank = auto-detect from vendor/bin/mago, default: 'mago')"
        },
        "mago.binCommand": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Command array for running mago (e.g., [\"docker\", \"exec\", \"mago\"])"
        },
        "mago.configFile": {
          "type": "string",
          "default": "mago.toml",
          "description": "Path to mago.toml configuration file"
        },
        "mago.workspace": {
          "type": "string",
          "description": "Workspace root directory"
        },
        "mago.enableLint": {
          "type": "boolean",
          "default": true,
          "description": "Enable linting"
        },
        "mago.enableAnalyze": {
          "type": "boolean",
          "default": true,
          "description": "Enable static analysis"
        },
        "mago.runOnSave": {
          "type": "boolean",
          "default": true,
          "description": "Run Mago automatically when PHP files are saved"
        },
        "mago.runOnSaveScope": {
          "type": "string",
          "enum": [
            "file",
            "project"
          ],
          "enumDescriptions": [
            "Run linter/analyzer on the saved file only",
            "Run linter/analyzer on the whole project"
          ],
          "default": "project",
          "description": "What to run the linter/analyzer on when saving: single file or whole project"
        },
        "mago.scanOnOpen": {
          "type": "boolean",
          "default": true,
          "description": "Scan project automatically when workspace opens"
        },
        "mago.phpVersion": {
          "type": "string",
          "description": "PHP version override"
        },
        "mago.threads": {
          "type": "number",
          "description": "Number of threads"
        },
        "mago.minimumReportLevel": {
          "type": "string",
          "enum": [
            "error",
            "warning",
            "note",
            "help"
          ],
          "default": "error",
          "description": "Minimum severity to report"
        },
        "mago.timeout": {
          "type": "number",
          "default": 30000,
          "description": "Timeout for non-watch operations (ms)"
        },
        "mago.useBaselines": {
          "type": "boolean",
          "default": false,
          "description": "Use baseline files to ignore existing issues. When enabled, only new issues will be reported."
        },
        "mago.lintBaseline": {
          "type": "string",
          "default": "lint-baseline.toml",
          "description": "Path to lint baseline file (e.g., lint-baseline.toml or ${workspaceFolder}/lint-baseline.toml)"
        },
        "mago.analysisBaseline": {
          "type": "string",
          "default": "analysis-baseline.toml",
          "description": "Path to analysis baseline file (e.g., analysis-baseline.toml or ${workspaceFolder}/analysis-baseline.toml)"
        },
        "mago.enableGuard": {
          "type": "boolean",
          "default": false,
          "description": "Enable architectural guard checks"
        },
        "mago.guardBaseline": {
          "type": "string",
          "default": "guard-baseline.toml",
          "description": "Path to guard baseline file (e.g., guard-baseline.toml or ${workspaceFolder}/guard-baseline.toml)"
        },
        "mago.runGuardOnSave": {
          "type": "boolean",
          "default": false,
          "description": "Run guard checks when PHP files are saved. Note: Guard can be slower than lint/analyze, so this defaults to false."
        },
        "mago.enableFormat": {
          "type": "boolean",
          "default": true,
          "description": "Enable formatting"
        },
        "mago.formatOnSave": {
          "type": "boolean",
          "default": false,
          "description": "Format PHP files automatically when saved"
        },
        "mago.formatAfterLintFix": {
          "type": "boolean",
          "default": true,
          "description": "Automatically format files after applying lint fixes."
        }
      }
    },
    "commands": [
      {
        "command": "mago.scanFile",
        "title": "Scan File",
        "category": "Mago"
      },
      {
        "command": "mago.scanProject",
        "title": "Scan Project",
        "category": "Mago"
      },
      {
        "command": "mago.clearErrors",
        "title": "Clear Errors",
        "category": "Mago"
      },
      {
        "command": "mago.generateLintBaseline",
        "title": "Generate Lint Baseline",
        "category": "Mago"
      },
      {
        "command": "mago.generateAnalysisBaseline",
        "title": "Generate Analysis Baseline",
        "category": "Mago"
      },
      {
        "command": "mago.generateGuardBaseline",
        "title": "Generate Guard Baseline",
        "category": "Mago"
      },
      {
        "command": "mago.formatFile",
        "title": "Format File",
        "category": "Mago"
      },
      {
        "command": "mago.formatDocument",
        "title": "Format Document",
        "category": "Mago"
      },
      {
        "command": "mago.formatProject",
        "title": "Format Project",
        "category": "Mago"
      },
      {
        "command": "mago.formatStaged",
        "title": "Format Staged Files",
        "category": "Mago"
      },
      {
        "command": "mago.lintFix",
        "title": "Lint Fix",
        "category": "Mago"
      },
      {
        "command": "mago.lintFixUnsafe",
        "title": "Lint Fix Unsafe",
        "category": "Mago"
      },
      {
        "command": "mago.lintFixPotentiallyUnsafe",
        "title": "Lint Fix Potentially Unsafe",
        "category": "Mago"
      },
      {
        "command": "mago.addFormatIgnoreNext",
        "title": "Add @mago-format-ignore-next",
        "category": "Mago"
      },
      {
        "command": "mago.addFormatIgnoreRegion",
        "title": "Add @mago-format-ignore-start/end",
        "category": "Mago"
      },
      {
        "command": "mago.addFormatIgnoreFile",
        "title": "Add @mago-format-ignore (file-level)",
        "category": "Mago"
      }
    ],
    "menus": {
      "commandPalette": [
        {
          "command": "mago.scanFile",
          "when": "resourceExtname == .php"
        },
        {
          "command": "mago.scanProject"
        },
        {
          "command": "mago.clearErrors"
        },
        {
          "command": "mago.generateLintBaseline"
        },
        {
          "command": "mago.generateAnalysisBaseline"
        },
        {
          "command": "mago.generateGuardBaseline"
        },
        {
          "command": "mago.formatFile",
          "when": "resourceExtname == .php"
        },
        {
          "command": "mago.formatDocument",
          "when": "resourceExtname == .php"
        },
        {
          "command": "mago.formatProject"
        },
        {
          "command": "mago.formatStaged"
        },
        {
          "command": "mago.lintFix"
        },
        {
          "command": "mago.lintFixUnsafe"
        },
        {
          "command": "mago.lintFixPotentiallyUnsafe"
        },
        {
          "command": "mago.addFormatIgnoreNext",
          "when": "resourceExtname == .php"
        },
        {
          "command": "mago.addFormatIgnoreRegion",
          "when": "resourceExtname == .php"
        },
        {
          "command": "mago.addFormatIgnoreFile",
          "when": "resourceExtname == .php"
        }
      ],
      "editor/context": [
        {
          "command": "mago.addFormatIgnoreNext",
          "when": "editorHasSelection && editorLangId == php",
          "group": "1_modification"
        },
        {
          "command": "mago.addFormatIgnoreRegion",
          "when": "editorHasSelection && editorLangId == php",
          "group": "1_modification"
        },
        {
          "command": "mago.addFormatIgnoreFile",
          "when": "editorLangId == php",
          "group": "1_modification"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -b && npm run resolve-paths",
    "resolve-paths": "tsc-alias -p tsconfig.json",
    "watch": "tsc -b -w",
    "type-check": "tsc --noEmit",
    "types": "tsc --noEmit",
    "pretest": "npm run compile",
    "test": "node ./client/out/test/runTest.js",
    "package": "vsce package"
  },
  "dependencies": {},
  "devDependencies": {
    "@types/node": "^18.0.0",
    "@types/vscode": "^1.90.0",
    "tsc-alias": "^1.8.16",
    "typescript": "^5.0.0"
  }
}


